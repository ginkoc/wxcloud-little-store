<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <text class="title">æˆ‘çš„è®¢å•</text>
  </view>
  
  <!-- ğŸ†• çŠ¶æ€ç­›é€‰å™¨ -->
  <view class="status-filter">
    <scroll-view class="filter-scroll" scroll-x="true">
      <view class="filter-tabs">
        <view 
          class="filter-tab {{selectedStatus === item.value ? 'active' : ''}}" 
          wx:for="{{statusList}}" 
          wx:key="value"
          bindtap="onStatusFilterChange" 
          data-status="{{item.value}}"
        >
          {{item.label}}
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{orders.length > 0}}">
    <view class="order-card" wx:for="{{orders}}" wx:key="_id">
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <view class="order-info">
          <text class="order-date">{{item.createTime}}</text>
          <text class="order-id">è®¢å•å·ï¼š{{item._id}}</text>
        </view>
        <view class="order-status" style="color: {{item.statusColor}}">{{item.statusText}}</view>
      </view>
      
      <!-- å•†å“åˆ—è¡¨ - æ”¹ä¸ºç¼©ç•¥å›¾å½¢å¼ -->
      <view class="product-card" bindtap="viewOrderDetail" data-id="{{item._id}}">
        <!-- äº§å“ç¼©ç•¥å›¾å’Œä¿¡æ¯ -->
        <view class="product-list">
          <!-- å¦‚æœæœ‰å¤šä¸ªå•†å“ï¼Œå¹³é“ºæ˜¾ç¤ºå•†å“å›¾ç‰‡ -->
          <block wx:if="{{item.items.length > 1}}">
            <view class="multi-product-images">
              <image 
                wx:for="{{item.items}}" 
                wx:for-item="product" 
                wx:key="productId"
                wx:if="{{index < 2}}"
                class="product-thumb" 
                src="{{product.imageURL || product.image || '/images/default-product.png'}}" 
                mode="aspectFill"
              ></image>
            </view>
          </block>
          
          <!-- å¦‚æœåªæœ‰ä¸€ä¸ªå•†å“ï¼Œæ˜¾ç¤ºå•†å“å›¾ç‰‡å’Œè¯¦æƒ… -->
          <block wx:else>
            <view class="single-product">
              <image 
                class="product-thumb" 
                src="{{item.items[0].imageURL || item.items[0].image || '/images/default-product.png'}}" 
                mode="aspectFill"
              ></image>
              <view class="product-info">
                <view class="product-name">{{item.items[0].productName}}</view>
                <view class="product-specs" wx:if="{{item.items[0].specs}}">{{item.items[0].specs}}</view>
              </view>
            </view>
          </block>
        </view>
        
        <!-- ä»·æ ¼å’Œæ•°é‡ä¿¡æ¯ -->
        <view class="product-price-info">
          <view class="price-amount">Â¥{{item.formattedTotalPrice}}</view>
          <view class="product-count">å…±{{item.items.length}}ä»¶</view>
        </view>
      </view>
      
      <!-- è®¢å•åº•éƒ¨ä¿¡æ¯å’Œæ“ä½œæŒ‰é’® -->
      <view class="order-footer">
        <view class="footer-space"></view>
        <view class="action-buttons">
          <!-- å¾…æ”¯ä»˜è®¢å•æŒ‰é’® -->
          <block wx:if="{{item.status === 'pending_payment'}}">
            <view class="pay-btn" bindtap="payOrder" data-id="{{item._id}}">ç«‹å³æ”¯ä»˜</view>
            <navigator url="/pages/order-detail/order-detail?orderId={{item._id}}" hover-class="none" class="detail-btn">æŸ¥çœ‹è¯¦æƒ…</navigator>
          </block>
          
          <!-- å¾…æ”¶è´§è®¢å•æŒ‰é’® -->
          <block wx:elif="{{item.status === 'delivered'}}">
            <view class="pay-btn" bindtap="confirmOrder" data-id="{{item._id}}">ç¡®è®¤æ”¶è´§</view>
            <navigator url="/pages/order-detail/order-detail?orderId={{item._id}}" hover-class="none" class="detail-btn">æŸ¥çœ‹è¯¦æƒ…</navigator>
          </block>
          
          <!-- å·²å®Œæˆè®¢å•æŒ‰é’® -->
          <block wx:elif="{{item.status === 'completed'}}">
            <navigator url="/pages/order-detail/order-detail?orderId={{item._id}}" hover-class="none" class="detail-btn">æŸ¥çœ‹è¯¦æƒ…</navigator>
          </block>
          
          <!-- å…¶ä»–çŠ¶æ€æŒ‰é’® -->
          <block wx:else>
            <navigator url="/pages/order-detail/order-detail?orderId={{item._id}}" hover-class="none" class="detail-btn">æŸ¥çœ‹è¯¦æƒ…</navigator>
          </block>
        </view>
      </view>
    </view>
  </view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{isLoading && orders.length > 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <!-- æ— æ›´å¤šæ•°æ® -->
  <view class="no-more-tip" wx:if="{{!hasMore && orders.length > 0}}">
    <text>â€” æ²¡æœ‰æ›´å¤šè®¢å•äº† â€”</text>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{orders.length === 0 && !isLoading}}">
    <image class="empty-icon" src="/images/shopping-cart.svg" mode="aspectFit"></image>
    <text class="empty-title">æš‚æ— è®¢å•è®°å½•</text>
    <text class="empty-desc">å¿«å»æŒ‘é€‰å¿ƒä»ªçš„å•†å“å§~</text>
    <view class="go-shopping-btn" bindtap="goShopping">
      <text>ç«‹å³è´­ç‰©</text>
    </view>
  </view>
</view> 